CREATE TABLE SUPPLIERS (
    SUPPLIER_ID      NUMBER(3) NOT NULL,
    SUPPLIER_NAME    VARCHAR2(50) NOT NULL,
    CONTACT_NAME     VARCHAR2(50) NOT NULL,
    ADDRESS          VARCHAR2(200) NOT NULL,
    CONTACT_NUMBER   VARCHAR2(50) NOT NULL,
    EMAIL            VARCHAR2(50),
    CREATED_DATE     DATE,
    CREATED_BY       VARCHAR2(10),
    CONSTRAINT SUPP_PK PRIMARY KEY ( SUPPLIER_ID )
);

CREATE TABLE ORDERS (
    ORDER_REF         VARCHAR2(5) NOT NULL,
    SUPPLIER_ID       NUMBER(3) NOT NULL,
    ORDER_DATE        DATE,
    TOTAL_AMOUNT      NUMBER(10),
    ORD_DESCRIPTION   VARCHAR2(200),
    ORD_STATUS        VARCHAR2(10),
    CREATED_DATE      DATE,
    CREATED_BY        VARCHAR2(10),
    CONSTRAINT ORDERS_PK PRIMARY KEY ( ORDER_REF )
);

CREATE TABLE ORDER_LINES (
    ORD_LINE_SEQ        NUMBER(5) NOT NULL,
    ORDER_REF           VARCHAR2(5) NOT NULL,
    ORDER_REF_LINE_ID   NUMBER(2),
    LINE_DESCRIPTION    VARCHAR2(200),
    LINE_STATUS         VARCHAR2(10),
    LINE_AMOUNT         NUMBER(10),
    INV_SEQ             NUMBER(5),
    INV_REFERENCE       VARCHAR2(9),
    CREATED_DATE        DATE,
    CREATED_BY          VARCHAR2(10),
    CONSTRAINT ORDER_LINES_PK PRIMARY KEY ( ORD_LINE_SEQ,
                                            ORDER_REF,
                                            ORDER_REF_LINE_ID )
);

CREATE TABLE INVOICES (
    INV_SEQ            NUMBER(5) NOT NULL,
    INV_REFERENCE      VARCHAR2(9) NOT NULL,
    INV_REF_PAY        NUMBER(3),
    INV_DATE           DATE,
    INV_STATUS         VARCHAR2(10),
    INV_HOLD_REASON    VARCHAR2(100),
    INV_AMOUNT         NUMBER(10),
    INV_DESCRIPTION    VARCHAR2(200),
    INV_CREATED_DATE   DATE,
    INV_CREATED_BY     VARCHAR2(10),
    CONSTRAINT INVOICES_PK PRIMARY KEY ( INV_SEQ,
                                         INV_REFERENCE )
);


ALTER TABLE ORDERS
ADD CONSTRAINT SUPP_ID_FK_ORDERS
   FOREIGN KEY (SUPPLIER_ID)
   REFERENCES SUPPLIERS (SUPPLIER_ID);


ALTER TABLE ORDER_LINES
ADD CONSTRAINT ORDER_REF_FK_ORDER_LINES
   FOREIGN KEY (ORDER_REF)
   REFERENCES ORDERS (ORDER_REF);

ALTER TABLE ORDER_LINES
ADD CONSTRAINT INV_SEQ_FK_ORDER_LINES
   FOREIGN KEY (INV_SEQ,INV_REFERENCE)
   REFERENCES INVOICES (INV_SEQ,INV_REFERENCE);